{% set headerContainerClassWidth = "govuk-header__container--full-width" if params.fullWidth else "govuk-width-container" %}
{% set navigationContainerClassWidth = "hmlr-header-navigation__container--full-width" if params.fullWidth else "govuk-width-container" %}
{% set menuButtonText = params.menuButtonText if params.menuButtonText else 'Menu' %}

<header class="govuk-header govuk-header--hmlr {{ params.classes if params.classes }}{% if params.navigation | length %} govuk-header__bottom-border--hmlr{% endif %}" role="banner" data-module="hmlr-header" {%- for attribute, value in params.attributes %} {{attribute}}="{{value}}"{% endfor %}>
  <div class="govuk-header__container {{ headerContainerClassWidth }} {{ params.containerClasses }}">
    {% if params.productName or params.logo %}
    <div class="govuk-header__logo">
      {% if params.homepageUrl %}
      <a href="{{ params.homepageUrl | default('/') }}" class="govuk-header__link govuk-header__link--homepage">
      {% else %}
      <span class="govuk-header__link--homepage govuk-header__link--no-hover">
      {% endif %}
        {% if params.logo %}
        <span class="govuk-header__logotype">
          <svg aria-hidden="true"
            focusable="false"
            class="govuk-header__logotype--hmlr"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 178.82 57.2"
            height="30"
            width="94">
            <path d="m129.71 14.17-2.73-4.72 2.73-4.73h5.45l2.73 4.73-2.73 4.72h-5.45zm-8.19 14.18-2.73-4.73 2.73-4.72h5.46l2.73 4.72-2.73 4.73h-5.46zm40.93-14.18-2.73-4.73 2.73-4.72h5.46l2.72 4.72-2.73 4.73h-5.45zm8.19 14.18-2.73-4.73 2.73-4.72h5.45l2.73 4.72-2.73 4.73h-5.45zm-32.75 28.36-2.73-4.73 2.73-4.73h5.46l2.73 4.73-2.73 4.73h-5.46zm16.37 0-2.72-4.73 2.72-4.73h5.46l2.73 4.73-2.73 4.73h-5.46zm-8.18-33.09-2.73-4.72 2.73-4.73h5.46l2.72 4.73-2.73 4.72h-5.45z" fill="#b2b2b2"/><path d="m146.08 33.07-2.73-4.72 2.73-4.73h5.46l2.72 4.73-2.73 4.72h-5.45z" fill="#fff"/><path d="m137.89 37.8-2.73-4.72 2.73-4.73h5.46l2.73 4.73-2.73 4.72h-5.46zm16.37 0-2.72-4.72 2.72-4.73h5.46l2.73 4.73-2.73 4.72h-5.46z" fill="#b2b2b2"/><path fill="#76b82a" d="m129.71 23.62-2.73-4.72 2.73-4.73h5.45l2.73 4.73-2.73 4.72h-5.45zm16.37-9.45-2.73-4.72 2.73-4.73h5.46l2.72 4.73-1 1.73-1.73 2.99h-5.45zm-16.37 28.36-2.73-4.73 2.73-4.72h-.01 5.46l2.73 4.72-2.73 4.73h-5.45zm32.74-18.91-2.73-4.72 2.73-4.73h5.46l2.72 4.73-2.73 4.72h-5.45zm-16.37 28.36-2.73-4.73 2.73-4.72h5.46l2.72 4.72-2.73 4.73h-5.45zm16.37-9.45-2.73-4.73 2.73-4.72h5.46l2.72 4.72-2.73 4.73h-5.45z"/><path fill="#bccf00" d="m137.89 9.45-2.73-4.73L137.89 0h5.46l2.73 4.72-2.73 4.73h-5.46zm16.37-.01-2.72-4.72L154.26 0h5.46l2.73 4.72-2.73 4.72h-5.46zM121.52 37.8l-2.73-4.72 2.73-4.73h5.46l2.72 4.73-2.72 4.72h-5.46zm8.19 14.18-2.73-4.73 2.73-4.72h5.45l2.73 4.72-2.73 4.73h-5.45zm40.93-14.18-2.73-4.72 2.73-4.73h5.45l2.73 4.73-2.73 4.72h-5.45zm-8.19 14.18-2.73-4.73 2.73-4.72h5.46l2.72 4.72-2.73 4.73h-5.45zm-19.1-23.63h-5.46l-2.73-4.73 2.73-4.72h5.46l2.73 4.72-2.73 4.73zm16.37 0h-5.46l-2.72-4.73 2.72-4.72h5.46l2.73 4.72-2.73 4.73zm-13.64 14.18-2.73-4.73 2.73-4.72h5.46l2.72 4.72-2.73 4.73h-5.45z"/><path fill="#f2e500" d="M143.35 18.9h-5.46l-2.73-4.73 2.73-4.72h5.46l2.73 4.72-2.73 4.73zm-13.64 14.18-2.73-4.73 2.73-4.73h5.45l2.73 4.73-2.73 4.73h-5.45zm30.01-14.18h-5.46l-2.72-4.73 1.72-2.99 1-1.73v-.01h5.46l2.73 4.73-2.73 4.73zm-16.37 28.35h-5.46l-2.73-4.72 2.73-4.73h5.46l2.73 4.73-2.73 4.72zm19.1-14.17-2.73-4.73 2.73-4.73h5.46l2.72 4.73-2.73 4.73h-5.45zm-2.73 14.17h-5.46l-2.72-4.72 2.72-4.73h5.46l2.73 4.73-2.73 4.72z"/><path d="M12.11 21.59V11.17H2.22v10.42H0V.4h2.22v8.82h9.89V.4h2.22v21.19h-2.22Zm21.81 0V3.66l-5.48 11.81c-.27.56-.5 1.36-.5 2.25v1.92h-2.22v-1.92c0-.95-.27-1.72-.5-2.25L19.68 3.66V21.6h-2.1V.4h2.69l6.63 13.82L33.42.4h2.69v21.19h-2.19Zm10.39 0V.4h2.22v19.24h8.35v1.95H44.31Zm22.52 0h-6.66c-.98 0-1.78-.33-2.34-.83l-.8-.74c-.71-.65-.98-1.24-.98-2.16v-1.72c0-.92.27-1.51.98-2.16l.89-.8c.59-.53 1.39-.77 2.37-.77h5.48v-1.48c0-.62-.35-1.04-.77-1.39l-.5-.44c-.68-.59-1.01-.71-1.89-.71h-5v-1.8h5.83c1.07 0 1.69.32 2.22.77l1.21 1.07c.92.8 1.1 1.3 1.1 2.37v9.59l-1.12 1.21Zm-1.07-7.37h-4.97c-.68 0-1.1.09-1.48.42l-.56.47c-.33.3-.56.59-.56 1.07v1.66c0 .44.21.77.53 1.04l.68.56c.3.24.71.35 1.39.35h4.97v-5.56Zm14.84 7.37v-9.56c0-1.01-.35-1.54-1.06-2.19l-.62-.56c-.47-.44-1.07-.83-2.16-.83h-3.79v13.14h-2.19V7.8l1.12-1.21h5.92c1.04 0 1.66.24 2.25.77l1.89 1.72c.56.53.83.95.83 1.83V21.6H80.6Zm15.89 0h-6.13c-.89 0-1.69-.24-2.66-1.04l-1.48-1.21c-.59-.5-.92-1.18-.92-2.57v-5.36c0-1.39.33-2.07.92-2.58l1.48-1.21c.98-.8 1.75-1.04 2.63-1.04h5.09V.4h2.19v19.98l-1.12 1.21ZM95.42 8.45h-4.08c-1.04 0-1.6.27-2.13.68l-.8.59c-.36.27-.92.89-.92 2.1v4.53c0 1.21.56 1.83.92 2.1l.8.59c.53.41 1.1.68 2.13.68h4.08V8.44ZM11.07 50.98v-2.07c0-.59-.09-1.21-.47-1.89l-2.58-4.83H2.16v8.79H0V31l1.18-1.21h6.51c2.16 0 2.58.65 4.11 1.98.98.83 1.24 1.51 1.24 2.49v3.55c0 1.01-.27 1.69-1.27 2.49l-1.57 1.27 2.69 4.91c.41.77.5 1.57.5 2.31v2.19h-2.34Zm-.3-16.31c0-.8-.27-1.36-.77-1.78l-.77-.68c-.5-.41-.92-.56-2.13-.56H2.16v8.67H7.1c1.21 0 1.63-.15 2.13-.56l.77-.65c.5-.41.77-1.01.77-1.81v-2.63Zm16.35 9.47h-8.88v1.63c0 1.21.47 1.83.83 2.1l.74.56c.53.39 1.01.68 2.01.68h5.59v1.87h-6.6c-.83 0-1.54-.24-2.49-1.04l-1.42-1.21c-.56-.5-.83-1.18-.83-2.58v-5.56c0-1.39.27-2.07.83-2.58l1.42-1.21c.95-.8 1.66-1.04 2.49-1.04h2.66c.83 0 1.54.24 2.49 1.04l1.42 1.21c.56.5.86 1.18.86 2.58v2.37l-1.12 1.18Zm-1.01-3.34c0-1.21-.5-1.83-.86-2.1l-.74-.59c-.5-.41-1.01-.71-2.01-.71h-.68c-1.01 0-1.51.29-2.01.71l-.74.59c-.35.27-.83.89-.83 2.1v1.57h7.87V40.8Zm16.03 14.53-1.24 1.1c-.53.44-1.15.77-2.22.77h-6.42v-1.87h5.56c.89 0 1.18-.15 1.89-.71l.56-.44c.41-.33.77-.77.77-1.39v-1.81h-5.06c-.89 0-1.69-.24-2.66-1.04l-1.48-1.21c-.59-.5-.92-1.18-.92-2.58v-5.36c0-1.39.33-2.07.92-2.58L33.32 37c.98-.8 1.75-1.04 2.64-1.04h7.28v16.99c0 1.07-.18 1.54-1.1 2.37Zm-1.09-17.49h-4.08c-1.04 0-1.6.27-2.13.68l-.8.59c-.35.27-.92.89-.92 2.1v4.53c0 1.21.56 1.84.92 2.1l.8.59c.53.41 1.09.68 2.13.68h4.08V37.83Zm4.85-4.24v-2.81h2.31v2.81H45.9Zm.06 17.38V35.97h2.19v15.01h-2.19Zm16.41-1.48-1.18.92c-.44.33-1.15.56-1.95.56h-8.05v-1.87h7.55c.65 0 1.01-.12 1.33-.35l.5-.39c.27-.21.53-.62.53-1.07v-1.16c0-.98-.47-1.42-1.78-1.54l-5.33-.53c-2.28-.24-3.11-1.51-3.11-3.05v-1.6c0-1.09.33-1.63.8-1.98l1.18-.92c.44-.33 1.15-.56 1.95-.56h7.43v1.87h-6.93c-.65 0-1.01.12-1.33.35l-.5.38c-.27.21-.53.62-.53 1.07v.92c0 .92.47 1.36 1.72 1.48l5.03.5c2.55.27 3.46 1.36 3.46 3.02v1.95c0 1.1-.33 1.63-.8 1.98Zm8 1.48c-1.07 0-1.75-.24-2.28-.68l-1.21-1.07c-.89-.8-1.04-1.33-1.04-2.43V32.71h2.19v3.25h4.65v1.87h-4.65v8.76c0 .5.18 1.01.86 1.6l.36.3c.68.56 1.07.62 1.95.62h1.48v1.87h-2.31Zm7.17-13.14v13.14h-2.19V37.19l1.12-1.21h6.45v1.87h-5.39Zm18.98 17.49-1.24 1.1c-.53.44-1.15.77-2.22.77h-6.57v-1.87h5.71c.89 0 1.18-.15 1.89-.71l.56-.44c.41-.33.77-.77.77-1.39v-1.81h-4.85c-1.04 0-1.66-.24-2.25-.77l-1.89-1.72c-.56-.53-.83-.95-.83-1.84V35.96h2.19v9.56c0 1.01.36 1.54 1.06 2.19l.62.56c.47.44 1.06.83 2.16.83h3.79V35.96h2.19v16.99c0 1.07-.18 1.54-1.1 2.37Z" fill="currentColor"/></svg>
          <!--[if IE 8]>
          <img src="{{ params.assetsPath | default('/assets/images') }}/hmlr-logo-white.svg" width="100" height="32" alt="HM Land Registry logo">
          <![endif]-->
        </span>
        {% endif %}
        {% if params.productName %}
        <span class="govuk-header__product-name">
          {{ params.productName }}
        </span>
        {% endif %}
      {% if params.homepageUrl %}
      </a>
      {% else %}
      </span>
      {% endif %}
    </div>
    {% endif %}
    <div class="govuk-header__content govuk-header__content--hmlr">
    {% if params.serviceUrl %}
      <a href="{{ params.serviceUrl }}" class="govuk-header__link govuk-header__service-name">
        {{ params.serviceName }}
      </a>
    {% else %}
      <span class="govuk-header__service-name">
        {{ params.serviceName }}
      </span>
    {% endif %}
    </div>
    <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" aria-label="{{ params.menuButtonLabel | default('Show or hide menu') }}" hidden>{{ menuButtonText }}</button>
  </div>
  {% if params.navigation | length %}
  <nav id="navigation" class="hmlr-header-navigation govuk-clearfix {{ params.navigationClasses if params.navigationClasses }}" aria-label="{{ params.navigationLabel | default(menuButtonText) }}" role="navigation" {%- for attribute, value in params.navigationAttributes %} {{attribute}}="{{value}}"{% endfor %}>
    <div class="hmlr-header-navigation__container {{ navigationContainerClassWidth }} {{ params.navigationContainerClasses }}">
      <ul class="hmlr-header-navigation__list">
      {% for item in params.navigation %}
        {% if item.href and item.text %}
        <li class="hmlr-header-navigation__list-item{% if item.active %} hmlr-header-navigation__list-item--current{% endif %}"{% for attribute, value in item.attributes %} {{attribute}}="{{value}}"{% endfor %}>
          <a class="govuk-link govuk-link--no-underline hmlr-header-navigation__link" href="{{ item.href }}">
            {{ item.text }}
          </a>
        </li>
        {% endif %}
      {% endfor %}
      </ul>
    </div>
  </nav>
  {% endif %}
</header>
